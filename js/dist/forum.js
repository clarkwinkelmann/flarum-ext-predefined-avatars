(()=>{var t={n:r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return t.d(e,{a:e}),e},d:(r,e)=>{for(var a in e)t.o(e,a)&&!t.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:e[a]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};(()=>{"use strict";t.r(r);const e=flarum.core.compat["forum/app"];var a=t.n(e);const o=flarum.core.compat["common/extend"],n=flarum.core.compat["forum/components/AvatarEditor"];var i=t.n(n);const u=flarum.core.compat["common/components/Button"];var c=t.n(u);function d(t,r){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},d(t,r)}const f=flarum.core.compat["common/components/Modal"];var s=function(t){var r,e;function o(){return t.apply(this,arguments)||this}e=t,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,d(r,e);var n=o.prototype;return n.className=function(){return"SetPredefinedAvatarModal"},n.title=function(){return a().translator.trans("clarkwinkelmann-predefined-avatars.forum.modal.title")},n.content=function(){var t=this,r=a().forum.attribute("predefinedAvatars");return m(".Modal-body",r.map((function(r){return m("a.Avatar.Avatar--predefined",{onclick:function(){t.attrs.user.save({predefinedAvatar:r}).then((function(){t.hide()}))}},m("img",{src:a().forum.attribute("predefinedAvatarsPrefix")+r,alt:a().translator.trans("clarkwinkelmann-predefined-avatars.forum.modal.imageAlt")}))})))},o}(t.n(f)());a().initializers.add("clarkwinkelmann-predefined-avatars",(function(){(0,o.extend)(i().prototype,"controlItems",(function(t){var r=this.attrs.user;r.avatarUrl()&&!a().forum.attribute("cannotRemoveAvatar")||!t.has("remove")||t.remove("remove"),a().forum.attribute("cannotSetCustomAvatar")&&t.has("upload")&&t.remove("upload"),a().forum.attribute("canSetPredefinedAvatar")&&t.add("predefined-avatars",c().component({icon:"fas fa-user-circle",onclick:function(){a().modal.show(s,{user:r})}},a().translator.trans("clarkwinkelmann-predefined-avatars.forum.editor.setPredefinedAvatar")))})),(0,o.override)(i().prototype,"quickUpload",(function(t,r){if(!a().forum.attribute("canSetPredefinedAvatar"))return t(r);var e=this.attrs.user;return!a().forum.attribute("cannotSetCustomAvatar")||e.avatarUrl()&&!a().forum.attribute("cannotRemoveAvatar")?void 0:(r.preventDefault(),r.stopPropagation(),void a().modal.show(s,{user:e}))}))}))})(),module.exports=r})();
//# sourceMappingURL=forum.js.map